<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Smart Hat - Control Panel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Orbitron', sans-serif;
      margin: 0;
      background: #0a0a0a;
      color: #00ffc8;
    }
    nav {
      display: flex;
      justify-content: space-around;
      background: #121212;
      border-bottom: 1px solid #00ffc8;
    }
    nav button {
      flex: 1;
      padding: 14px;
      font-size: 16px;
      background: none;
      border: none;
      color: #00ffc8;
      cursor: pointer;
    }
    .section {
      display: none;
      padding: 20px;
    }
    .active {
      display: block;
    }
    button, select, input[type="text"], input[type="range"] {
      padding: 12px;
      font-size: 16px;
      border-radius: 10px;
      border: none;
      margin: 5px 0;
    }
    button {
      background: #00ffc8;
      color: #000;
      cursor: pointer;
      box-shadow: 0 0 10px rgba(0,255,200,0.5);
    }
    #map {
      height: 40vh;
      width: 100%;
      margin-bottom: 10px;
    }
    .log-box, .status-box {
      background: #1a1a1a;
      padding: 10px;
      border-radius: 8px;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <nav>
    <button onclick="switchSection('dashboard')">📊 Dashboard</button>
    <button onclick="switchSection('nav')">🗺️ Navigation</button>
    <button onclick="switchSection('detect')">🎯 Detection</button>
    <button onclick="switchSection('sensor')">📏 Sensors</button>
    <button onclick="switchSection('system')">🧠 System</button>
    <button onclick="switchSection('voice')">🔊 Voice</button>
  </nav>

  <div id="dashboard" class="section active">
    <h2>Welcome to Smart Hat Dashboard</h2>
    <p>Use the tabs above to navigate features.</p>
    <ul>
      <li>Real-time Navigation and Directions</li>
      <li>AI Object Detection and Alerts</li>
      <li>Ultrasonic Sensor Thresholds</li>
      <li>Battery Monitoring and System Health</li>
      <li>Voice Command & Feedback</li>
    </ul>
  </div>

  <div id="nav" class="section">
    <div id="map"></div>
    <input type="text" id="destinationInput" placeholder="Search destination...">
    <button onclick="startVoiceSearch()">🎙 Voice</button>
    <div>
      <button onclick="goTo('Target')">🏬 Target</button>
      <button onclick="goTo('Walmart')">🛒 Walmart</button>
      <button onclick="goTo('Pharmacy')">💊 Pharmacy</button>
    </div>
  </div>

  <div id="detect" class="section">
    <button onclick="startDetection()">🟢 Start</button>
    <button onclick="stopDetection()">🔴 Stop</button>
    <select id="objectClassSelect">
      <option value="person">person</option>
      <option value="dog">dog</option>
      <option value="cat">cat</option>
      <option value="car">car</option>
      <option value="bus">bus</option>
      <option value="bicycle">bicycle</option>
      <option value="motorcycle">motorcycle</option>
      <option value="truck">truck</option>
      <option value="traffic light">traffic light</option>
      <option value="stop sign">stop sign</option>
    </select>
    <button onclick="updateConfig()">✅ Apply</button>
    <button onclick="toggleVoice()" id="voiceToggle">🔊 Voice ON</button>
  </div>

  <div id="sensor" class="section">
    <h3>🔧 Ultrasonic Thresholds (cm)</h3>
    <label>Left Front: <input type="range" id="lf" min="10" max="150" value="70" oninput="updateLabel('lf')"> <span id="lf_val">70</span></label><br>
    <label>Left Middle: <input type="range" id="lm" min="10" max="150" value="70" oninput="updateLabel('lm')"> <span id="lm_val">70</span></label><br>
    <label>Left Rear: <input type="range" id="lr" min="10" max="150" value="70" oninput="updateLabel('lr')"> <span id="lr_val">70</span></label><br>
    <label>Right Front: <input type="range" id="rf" min="10" max="150" value="70" oninput="updateLabel('rf')"> <span id="rf_val">70</span></label><br>
    <label>Right Middle: <input type="range" id="rm" min="10" max="150" value="70" oninput="updateLabel('rm')"> <span id="rm_val">70</span></label><br>
    <label>Right Rear: <input type="range" id="rr" min="10" max="150" value="70" oninput="updateLabel('rr')"> <span id="rr_val">70</span></label><br>
    <button onclick="applyThresholds()">Save Thresholds</button>
  </div>

  <div id="system" class="section">
    <button onclick="checkStatus()">📊 Check Status</button>
    <button onclick="toggleLog()">📄 Logs</button>
    <button onclick="resetWiFi()">🔄 Reset Wi-Fi</button>
    <div id="statusPanel" class="status-box">
      🔋 Battery: <span id="batteryLevel">--</span>% | 🧠 Health: <span id="healthStatus">--</span>
    </div>
    <div id="log" class="log-box" style="display:none">Loading...</div>
    <div style="margin-top: 10px">
      <a href="/video_feed" target="_blank">📹 Live Stream</a> |
      <a href="/feed" target="_blank">📡 Feed Panel</a>
    </div>
  </div>

  <div id="voice" class="section">
    <input type="text" id="voiceInput" placeholder="Enter a message">
    <button onclick="sendVoice()">📢 Speak</button>
  </div>

  <script>
    function switchSection(id) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }
  </script>
  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places&callback=initMap" async defer></script>
  <!-- Original script content from your app should go below -->
</body>
</html>
